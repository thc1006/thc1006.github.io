import React, { useState } from 'react';
import { MapPin, Clock, Calendar, Info, Navigation, ArrowRight, BedDouble, Bike, Train } from 'lucide-react';

const ItineraryApp = () => {
  const [activeTab, setActiveTab] = useState(0);

  const tripDetails = {
    dates: "2026.01.27 — 01.29",
    hotel: {
      name: "靡生三館 Maison Bohéme",
      room: "Room 2702",
      address: "台南市中西區萬昌街27號",
      contact: "郭小姐 0916-729-418",
      note: "看到「森澪」即抵達 | 無行李寄放服務",
      mapLink: "https://www.google.com/maps/place/700台南市中西區萬昌街27號"
    },
    rental: {
      name: "詠心同行 機車出租",
      model: "JbubuS 125CC",
      pickup: "1/27 14:30",
      dropoff: "1/29 19:00",
      mapLink: "https://www.google.com/maps/place/704台南市北區北門路二段17號"
    },
    transport: {
      to: "1/27 新竹 11:25 → 台南 14:17 (5798180)",
      back: "1/29 台南 (預計 19:30 後班次)"
    }
  };

  const days = [
    {
      id: 0,
      date: "01/27",
      weekday: "Tuesday",
      title: "Arrival & Art",
      theme: "City Walk",
      events: [
        {
          time: "14:17",
          title: "抵達台南",
          desc: "抵達台南火車站，準備開啟旅程。",
          icon: <Train size={18} />,
          tag: "Transport"
        },
        {
          time: "14:30",
          title: "詠心同行 取車",
          desc: "前往車行辦理租車，將大件行李暫時寄放於此。",
          location: "詠心同行",
          mapLink: "https://www.google.com/maps/place/704台南市北區北門路二段17號",
          icon: <Bike size={18} />,
          tag: "Rental"
        },
        {
          time: "15:00",
          title: "臺南市美術館 2 館",
          desc: "欣賞碎形屋頂下的光影美學。建議前往 5 樓露台拍攝合照。",
          location: "台南美術館2館",
          mapLink: "https://www.google.com/maps/place/臺南市美術館2館",
          icon: <MapPin size={18} />,
          tag: "Activity"
        },
        {
          time: "16:00",
          title: "午後咖啡時光",
          desc: "推薦：南美春室 (頂樓) 或 窄門咖啡。放慢步調，享受古都氛圍。",
          tag: "Coffee"
        },
        {
          time: "17:00",
          title: "Check-in & 整頓",
          desc: "回車行拿行李，前往民宿辦理入住。",
          location: "靡生三館",
          mapLink: "https://www.google.com/maps/place/700台南市中西區萬昌街27號",
          icon: <BedDouble size={18} />,
          tag: "Check-in"
        },
        {
          time: "18:30",
          title: "神農街 & 海安路",
          desc: "老街燈籠亮起，氛圍極佳。晚餐可於附近特色小店解決。",
          location: "神農街",
          mapLink: "https://www.google.com/maps/place/神農街,+700台南市中西區",
          tag: "Night Walk"
        },
        {
          time: "20:30",
          title: "大東東夜市",
          desc: "週二限定。推薦：地瓜球、素食滷味。備案：小北觀光市場。",
          location: "大東東夜市",
          mapLink: "https://www.google.com/maps/place/大東夜市,+701台南市東區林森路一段276號",
          tag: "Food"
        }
      ]
    },
    {
      id: 1,
      date: "01/28",
      weekday: "Wednesday",
      title: "Ocean & Sunset",
      theme: "West Coast",
      events: [
        {
          time: "10:30",
          title: "慢活早午餐",
          desc: "睡飽再出發。推薦：赤崁璽樓 (素食友善) 或 毛房蔥柚鍋。",
          tag: "Brunch"
        },
        {
          time: "12:00",
          title: "安平樹屋 & 德記洋行",
          desc: "避開人潮的午後，在榕樹氣根與光影間拍攝質感大片。",
          location: "安平樹屋",
          mapLink: "https://www.google.com/maps/place/安平樹屋,+708台南市安平區古堡街108號",
          tag: "Photo Spot"
        },
        {
          time: "13:30",
          title: "安平老街覓食",
          desc: "同記安平豆花 (檸檬口味)、周氏蝦捲。順便物色伴手禮。",
          location: "安平老街",
          mapLink: "https://www.google.com/maps/place/安平老街,+708台南市安平區延平街",
          tag: "Food"
        },
        {
          time: "16:00",
          title: "漁光島 森林光影",
          desc: "穿越漁光大橋。先至木麻黃森林步道拍攝森系照片。",
          location: "漁光島",
          mapLink: "https://www.google.com/maps/place/漁光島,+708台南市安平區",
          tag: "Nature"
        },
        {
          time: "17:30",
          title: "月牙灣夕陽",
          desc: "Golden Hour。坐在漂流木上等待日落 (約17:40)。記得帶外套。",
          tag: "Sunset"
        },
        {
          time: "19:00",
          title: "安平晚餐",
          desc: "避開下班尖峰車潮，建議在安平用餐後再返回市區。推薦：文章牛肉湯。",
          location: "文章牛肉湯",
          mapLink: "https://www.google.com/maps/place/文章牛肉湯,+708台南市安平區安平路300號",
          tag: "Dinner"
        }
      ]
    },
    {
      id: 2,
      date: "01/29",
      weekday: "Thursday",
      title: "Lake & Heritage",
      theme: "East Side",
      events: [
        {
          time: "09:00",
          title: "退房 & 寄放行李",
          desc: "前往火車站行李房寄放行李 (強烈建議輕裝前往新化)。",
          location: "台南火車站",
          mapLink: "https://www.google.com/maps/place/臺南車站,+701台南市東區北門路二段4號",
          tag: "Logistics"
        },
        {
          time: "10:10",
          title: "虎頭埤風景區",
          desc: "租借雙人腳踏船。早晨湖面平靜，享受包場般的寧靜時光。",
          location: "虎頭埤風景區",
          mapLink: "https://www.google.com/maps/place/虎頭埤風景區,+712台南市新化區中興路42巷36號",
          tag: "Activity"
        },
        {
          time: "12:30",
          title: "新化老街",
          desc: "欣賞巴洛克建築。午餐：葉麥克炸雞 (有素食)、新化老街咖啡。",
          location: "新化老街",
          mapLink: "https://www.google.com/maps/place/新化老街,+712台南市新化區中正路",
          tag: "Food & Culture"
        },
        {
          time: "14:00",
          title: "大目降文化園區",
          desc: "參觀武德殿與日式宿舍群，把握最後拍照機會。",
          location: "大目降文化園區",
          mapLink: "https://www.google.com/maps/place/大目降文化園區,+712台南市新化區和平街45巷3號",
          tag: "Photo Spot"
        },
        {
          time: "15:30",
          title: "返回台南市區",
          desc: "提早回程避開下班車潮。若有時間可逛逛林百貨。",
          tag: "Return"
        },
        {
          time: "19:00",
          title: "還車 & 賦歸",
          desc: "將機車加滿油歸還。前往火車站準備搭車。",
          location: "詠心同行",
          mapLink: "https://www.google.com/maps/place/704台南市北區北門路二段17號",
          icon: <Train size={18} />,
          tag: "End"
        }
      ]
    }
  ];

  return (
    <div className="min-h-screen bg-stone-50 font-sans text-stone-800 selection:bg-orange-200">
      {/* Hero Header */}
      <header className="relative bg-stone-900 text-white pb-12 pt-16 px-6 overflow-hidden">
        <div className="absolute top-0 right-0 w-64 h-64 bg-orange-500 rounded-full blur-[100px] opacity-20 -translate-y-1/2 translate-x-1/2"></div>
        <div className="relative z-10 max-w-md mx-auto">
          <div className="flex items-center space-x-2 text-orange-400 mb-2">
            <MapPin size={16} />
            <span className="text-sm font-medium tracking-widest uppercase">Tainan, Taiwan</span>
          </div>
          <h1 className="text-4xl font-serif font-bold mb-2 leading-tight">
            The Slow Travel <br/> Itinerary
          </h1>
          <p className="text-stone-400 text-sm font-light tracking-wide">{tripDetails.dates}</p>
        </div>
      </header>

      {/* Main Content */}
      <main className="max-w-md mx-auto px-6 -mt-8 relative z-20 pb-20">
        
        {/* Info Cards - Quick Access */}
        <section className="space-y-4 mb-10">
          <div className="bg-white p-5 rounded-2xl shadow-sm border border-stone-100">
            <div className="flex items-start justify-between mb-3">
              <div className="flex items-center space-x-2 text-stone-500">
                <BedDouble size={18} />
                <span className="text-xs font-bold uppercase tracking-wider">Accommodation</span>
              </div>
              <a href={tripDetails.hotel.mapLink} target="_blank" rel="noreferrer" className="text-orange-600 bg-orange-50 hover:bg-orange-100 p-2 rounded-full transition-colors">
                <Navigation size={16} />
              </a>
            </div>
            <h3 className="font-bold text-lg leading-tight mb-1">{tripDetails.hotel.name}</h3>
            <p className="text-stone-500 text-sm mb-2">{tripDetails.hotel.room}</p>
            <div className="text-xs text-stone-400 border-t border-stone-100 pt-3 mt-2">
              <p>{tripDetails.hotel.address}</p>
              <p className="mt-1">{tripDetails.hotel.contact}</p>
            </div>
          </div>

          <div className="bg-white p-5 rounded-2xl shadow-sm border border-stone-100">
            <div className="flex items-start justify-between mb-3">
              <div className="flex items-center space-x-2 text-stone-500">
                <Bike size={18} />
                <span className="text-xs font-bold uppercase tracking-wider">Rental</span>
              </div>
              <a href={tripDetails.rental.mapLink} target="_blank" rel="noreferrer" className="text-orange-600 bg-orange-50 hover:bg-orange-100 p-2 rounded-full transition-colors">
                <Navigation size={16} />
              </a>
            </div>
            <h3 className="font-bold text-lg leading-tight mb-1">{tripDetails.rental.name}</h3>
            <p className="text-stone-500 text-sm">{tripDetails.rental.model}</p>
            <div className="flex justify-between mt-4 text-xs">
              <div>
                <span className="block text-stone-400 mb-1">Pickup</span>
                <span className="font-medium text-stone-700">{tripDetails.rental.pickup}</span>
              </div>
              <div className="text-right">
                <span className="block text-stone-400 mb-1">Return</span>
                <span className="font-medium text-stone-700">{tripDetails.rental.dropoff}</span>
              </div>
            </div>
          </div>
        </section>

        {/* Tabs */}
        <div className="flex bg-stone-200 p-1 rounded-xl mb-8">
          {days.map((day, index) => (
            <button
              key={day.id}
              onClick={() => setActiveTab(index)}
              className={`flex-1 py-2 text-sm font-medium rounded-lg transition-all duration-300 ${
                activeTab === index 
                  ? 'bg-white text-stone-900 shadow-sm' 
                  : 'text-stone-500 hover:text-stone-700'
              }`}
            >
              {day.date}
            </button>
          ))}
        </div>

        {/* Day Header */}
        <div className="mb-6 animate-fade-in">
          <span className="text-orange-600 font-bold text-sm tracking-wider uppercase">{days[activeTab].weekday}</span>
          <h2 className="text-3xl font-serif font-bold text-stone-800">{days[activeTab].title}</h2>
          <p className="text-stone-500 text-sm mt-1">{days[activeTab].theme}</p>
        </div>

        {/* Timeline */}
        <div className="relative border-l-2 border-stone-200 ml-3 space-y-8 pb-4">
          {days[activeTab].events.map((event, idx) => (
            <div key={idx} className="relative pl-8 group">
              {/* Timeline Dot */}
              <div className="absolute -left-[9px] top-1 w-4 h-4 rounded-full border-4 border-white bg-orange-500 shadow-sm group-hover:scale-110 transition-transform"></div>
              
              {/* Event Content */}
              <div className="flex flex-col items-start">
                <div className="flex items-center space-x-3 mb-1">
                  <span className="font-mono text-xs font-bold text-stone-400 bg-stone-100 px-2 py-0.5 rounded-md">
                    {event.time}
                  </span>
                  <span className="text-[10px] uppercase tracking-widest text-orange-600/80 font-bold border border-orange-100 px-1.5 rounded">
                    {event.tag}
                  </span>
                </div>
                
                <h3 className="text-lg font-bold text-stone-800 leading-snug mb-1">
                  {event.title}
                </h3>
                
                <p className="text-stone-500 text-sm leading-relaxed mb-3">
                  {event.desc}
                </p>

                {event.mapLink && (
                  <a 
                    href={event.mapLink}
                    target="_blank"
                    rel="noreferrer"
                    className="inline-flex items-center space-x-1.5 text-xs font-bold text-stone-700 bg-white border border-stone-200 px-3 py-2 rounded-lg hover:bg-stone-50 hover:border-orange-200 transition-all shadow-sm active:scale-95"
                  >
                    <Navigation size={12} className="text-orange-600" />
                    <span>Navigate to {event.location || "Location"}</span>
                  </a>
                )}
              </div>
            </div>
          ))}
        </div>

      </main>

      {/* Footer */}
      <footer className="bg-white border-t border-stone-100 py-8 text-center px-6">
        <p className="text-stone-400 text-xs uppercase tracking-widest mb-2">Have a safe trip</p>
        <div className="flex justify-center items-center space-x-2 text-stone-300">
          <span className="w-1 h-1 rounded-full bg-stone-300"></span>
          <span className="w-1 h-1 rounded-full bg-stone-300"></span>
          <span className="w-1 h-1 rounded-full bg-stone-300"></span>
        </div>
      </footer>
    </div>
  );
};

export default ItineraryApp;